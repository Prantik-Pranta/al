
{% extends 'base.html' %}
{% load tz %}
{% block title %}Manage Availability{% endblock %}

{% block content %}
<div class="container py-4">
  <h3 class="mb-3">Manage Availability (Alumni)</h3>

  <form method="post" class="card p-3 mb-4">
    {% csrf_token %}
    <div class="row g-3 align-items-end">
      <div class="col-md-5">
        <label class="form-label">Start time</label>
        <input type="datetime-local" name="start_time" class="form-control" required>
      </div>
      <div class="col-md-5">
        <label class="form-label">End time</label>
        <input type="datetime-local" name="end_time" class="form-control" required>
      </div>
      <div class="col-md-2">
        <button class="btn btn-primary w-100">Add Slot</button>
      </div>
    </div>
  </form>

  <div class="card">
    <div class="card-header"><strong>Your slots</strong></div>
    <div class="table-responsive">
      <table class="table mb-0">
        <thead><tr><th>Start</th><th>End</th><th>Status</th></tr></thead>
        <tbody>
          {% for s in my_slots %}
            <tr>
              <td>{{ s.start_time|localtime }}</td>
              <td>{{ s.end_time|localtime }}</td>
              <td>{% if s.is_booked %}<span class="badge bg-secondary">Booked</span>{% else %}<span class="badge bg-success">Free</span>{% endif %}</td>
            </tr>
          {% empty %}
            <tr><td colspan="3" class="text-muted">No slots yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
