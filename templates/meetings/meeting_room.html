
{% extends 'base.html' %}
{% block title %}Meeting Room{% endblock %}

{% block content %}
<div class="container py-4">
  <h3 class="mb-3">Meeting Room</h3>
  <div id="jitsi-container" style="height: 70vh; border-radius: 8px; overflow: hidden;"></div>
  <div class="mt-3">
    <a class="btn btn-outline-secondary" href="https://{{ jitsi_domain }}/{{ room_code }}" target="_blank">
      Open in new tab
    </a>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Load Jitsi API first -->
<script src="https://meet.jit.si/external_api.js"></script>

<script>
  // Jitsi external API embed
  (function() {
    const domain = "{{ jitsi_domain }}";
    const options = {
      roomName: "{{ room_code }}",
      parentNode: document.querySelector('#jitsi-container'),
      userInfo: { displayName: "{{ request.user.userprofile.full_name|escapejs }}" }
    };
    const api = new JitsiMeetExternalAPI(domain, options);
  })();
</script>
{% endblock %}

